

<!doctype html>
<html>
   <head>
      <meta charset="utf-8"/>
      <title>ImageChrysalis</title>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/exif-js"></script>
   </head>
   <body>
      <form id='file-catcher'>
         <input id='file-input' type='file' multiple/>
         <button type='submit'>
         Submit
         </button>
      </form>
      <div id='file-list-display'></div>
      <script>
         (function () {
         var fileCatcher = document.getElementById('file-catcher');
         var fileInput = document.getElementById('file-input');
         var fileListDisplay = document.getElementById('file-list-display');
         var fileList = [];
         var renderFileList, sendFile;
         fileCatcher.addEventListener('submit', function (evnt) {
         evnt.preventDefault();
         fileList.forEach(function (file) {
         sendFile(file);
         });
         });
         fileInput.addEventListener('change', function (evnt) {
         fileList = [];
         for (var i = 0; i < fileInput.files.length; i++) {
         fileList.push(fileInput.files[i]);
         }
         renderFileList();
         });

         //////////////////////////////////////////////////////////////////////////////////////

         renderFileList = function (callback) {
          var images = [];
         fileListDisplay.innerHTML = '';
         count = 0;

         fileList.forEach(function (file, index) {
           images.push(getExif(file));
         });
          sendRequest(images);
         }



         function getExif(img) {
             EXIF.getData(img, function() {
                 var allMetaData = EXIF.getAllTags(this);
                 var allMetaDataSpan = document.getElementById("allMetaDataSpan");

                 console.log(allMetaData)
                 return allMetaData;
             });
         }

         /////////////////////////////////////////////////////////////////////////////////

         sendFile = function (file) {
         var formData = new FormData();
         var request = new XMLHttpRequest();
         formData.set('file', file);
         request.open("POST", 'https://jsonplaceholder.typicode.com/photos');
         request.send(formData);
         };

         })();
      </script>
   </body>
</html>
