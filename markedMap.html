<!DOCTYPE html>
<html lang="en">
<head>
  <title>Marked Map</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
</head>
<body>

<canvas id="myCanvas" width="5000" height="5000">Your browser does not support the HTML5 canvas tag.</canvas>
<script>
  var imagesDMS = [
    {imageName: "img_1", latD: 40, latM: 48, latS: 20.981, longD: 80, longM: 30, longS: 42.875},
    {imageName: "img_2", latD: 40, latM: 48, latS: 21.981, longD: 80, longM: 30, longS: 42.627},
    {imageName: "img_3", latD: 40, latM: 48, latS: 20.946, longD: 80, longM: 30, longS: 43.015},
    {imageName: "img_4", latD: 40, latM: 48, latS: 20.321, longD: 80, longM: 30, longS: 42.381},
    {imageName: "img_5", latD: 40, latM: 48, latS: 20.686, longD: 80, longM: 30, longS: 42.186},
  ];

  //convert DMS to latLong doubles
  var imagesLatLong = new Array(imagesDMS.length);
  for(var i=0; i<imagesLatLong.length; i++) {
    imagesLatLong[i] = {
      imageName: imagesDMS[i].imageName,
      lat: ((imagesDMS[i].latD) + (imagesDMS[i].latM/60) + (imagesDMS[i].latS/3600)),
      long: ((imagesDMS[i].longD) + (imagesDMS[i].longM/60) + (imagesDMS[i].longS/3600))
    };
    console.log(imagesLatLong[i].lat)
  }

/*
  var imagesLatLong = [
    {imageName: "img_1", lat: 80.684, long: -40.438},
    {imageName: "img_2", lat: 80.623, long: -40.427},
    {imageName: "img_3", lat: 80.686, long: -40.445},
    {imageName: "img_4", lat: 80.635, long: -40.454},
    {imageName: "img_5", lat: 80.648, long: -40.431},
    {imageName: "img_6", lat: 80.665, long: -40.499},
    {imageName: "img_7", lat: 80.648, long: -40.432}
  ];
  */

  //algorithm to shift x and y to PDF pixel values:
  //put everything onto 4th quadrant
    //shift x so that min x (furthest west) is x=0
      //find minimum x
      //shift everything by that value
    //shift y so that max y (furthest north) is y=0
  //blow up by specific amount (use: 3/16":1ft and dpi of PDF)

//look for min x
  var minX = imagesLatLong[0].long;
  for(var i=0; i<imagesLatLong.length; i++) {
    if(imagesLatLong[i].long < minX) {
      minX = imagesLatLong[i].long;
    }
  }
  //shift everythng by minX
  for(var i=0; i<imagesLatLong.length; i++) {
    imagesLatLong[i].long -= minX;
  }
  //look for max y
  var maxY = imagesLatLong[0].lat;
  for(var i=0; i<imagesLatLong.length; i++) {
    if(imagesLatLong[i].lat < maxY) {
      maxY = imagesLatLong[i].lat;
    }
  }
  //shift everythng by maxY
  for(var i=0; i<imagesLatLong.length; i++) {
    imagesLatLong[i].lat -= maxY;
    console.log(imagesLatLong[i].lat);
  }

  //blow everything up by some proportion
  var proportion = 20493000;
  for(var i=0; i<imagesLatLong.length; i++) {
    imagesLatLong[i].lat *= proportion;
    imagesLatLong[i].long *= proportion;
    console.log(imagesLatLong[i].lat + ", " + imagesLatLong[i].long);
  }

  var images = new Array(imagesLatLong.length);
  for(var i=0; i<images.length; i++) {
    images[i] = {
      imageName: imagesLatLong[i].imageName,
      x: imagesLatLong[i].long,
      y: imagesLatLong[i].lat
    };
  }
  /*
  var images = [
    {imageName: "img_1", x: 10, y: 10},
    {imageName: "img_2", x: 50, y: 50},
    {imageName: "img_3", x: 149, y: 149},
    {imageName: "img_4", x: 200, y: 200},
    {imageName: "img_5", x: 250, y: 250},
    {imageName: "img_6", x: 300, y: 300},
    {imageName: "img_7", x: 350, y: 350}
  ];
  */

  var c = document.getElementById("myCanvas");
  var ctx = c.getContext("2d");
  ctx.fillStyle = "#00C0CF";
  var length = 20;
  var width = length;

  for(var i=0; i<images.length; i++) {
    ctx.fillRect((images[i].x-(width/2)), (images[i].y-(length/2)), length, width); //later: use path and arc to make circle
  }

  var x = 200;
  var y = 20;
  var length = 2;
  var width = 2;
  //  ctx.fillRect(x, y, width, length);

</script>

</body>
</html>
